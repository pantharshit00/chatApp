'use strict';var typers=[],socket=io.connect('https://chataoo-hevquhaznz.now.sh');socket.on('get_id',function(){var a=window.id||'';socket.emit('set_id',{id:a})}),socket.on('get_typers_count',function(a){typers=a.typers,showTypers(typers)}),socket.on('online',function(a){console.log(a);var b=$('.list-group .list-group-item');b.each(function(c,f){var g=a.map(function(h){return h.data.id}).indexOf(f.dataset.id);-1<g&&0>f.innerHTML.indexOf('\u2022')?f.innerHTML+=' <span style="color:green;font-size:20px;">&bull;</span>':-1<g&&0<f.innerHTML.indexOf('\u2022')?console.log('Already maked'):f.innerHTML=f.innerHTML.replace('\u2022','')})}),$(function(){$('#chat').submit(function(a){a.preventDefault();$('#ms').val()&&(socket.emit('msg_rec',{message:$('#ms').val(),id:window.id}),$('#ms').val(''))}),$('#ms').on('keyup',function(){console.log('TRIG'),this.value||socket.emit('rm_typer',{name:window.name}),-1==typers.indexOf(window.name)&&(console.log(typers.indexOf(window.name)),typers.push(window.name),socket.emit('type',{name:window.name}))}),$('#sub-b').on('click',function(){socket.emit('rm_typer',{name:window.name})})}),socket.on('typing',function(a){console.log(a),typers=a.typers,showTypers(typers)});function showTypers(a){if($('#typers').html(''),0!=a.length){if(1==a.length)$('#typers').append(a[0]+' ');else for(var b=0;b<a.length;b++)0==b?$('#typers').append(a[0]):$('#typers').append(','+a[b]);$('#typers').append(' is typing')}}socket.on('message',function(a){console.log(a);var b=template(a.aid,a.name,a.message,a.date);$('#messages').append(b)});var avatars=['https://semantic-ui.com/images/avatar/small/matt.jpg','https://semantic-ui.com/images/avatar/small/elliot.jpg','https://semantic-ui.com/images/avatar/small/jenny.jpg','https://semantic-ui.com/images/avatar/small/joe.jpg','https://semantic-ui.com/images/avatar2/small/elyse.png','https://semantic-ui.com/images/avatar2/small/matthew.png','https://semantic-ui.com/images/avatar2/small/kristy.png','https://semantic-ui.com/images/avatar2/small/eve.png','https://semantic-ui.com/images/avatar/small/helen.jpg','https://semantic-ui.com/images/avatar/small/justen.jpg'];function template(a,b,c,f){return'\n        <div class="ui feed">\n            <div class="event">\n                <div class="label"><img src="'+avatars[a]+'"></div>\n                <div class="content">\n                <div class="summary">\n                    <u>'+b+'</u>: '+escapeHTML(c)+'\n                    <div class="date">'+f+'</div>\n                </div>\n            </div>\n        </div>\n    '}function escapeHTML(a){var b=document.createTextNode(a),c=document.createElement('div');return c.appendChild(b),c.innerHTML}